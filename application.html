<!DOCTYPE html>
<html>
<head>
  <title>NBG Application</title>
  <!-- CSS and other code -->
</head>
<body>
  <!-- Navbar and other code -->

  <div class="rendered-form">
    <form onsubmit="sendContact(event)">
      <!-- Form fields -->

      <button type="submit" class="btn btn-primary">Submit</button>
    </form>
  </div>

  <script>
    async function sendContact(ev) {
      ev.preventDefault();

      const previousSubmissionTime = localStorage.getItem('submissionTime');
      if (previousSubmissionTime) {
        const twentyFourHoursInMilliseconds = 24 * 60 * 60 * 1000;
        const currentTime = new Date().getTime();
        const elapsedTime = currentTime - previousSubmissionTime;

        if (elapsedTime < twentyFourHoursInMilliseconds) {
          const remainingTime = twentyFourHoursInMilliseconds - elapsedTime;
          const remainingHours = Math.floor(remainingTime / (1000 * 60 * 60));
          const remainingMinutes = Math.floor((remainingTime % (1000 * 60 * 60)) / (1000 * 60));
          const remainingSeconds = Math.floor((remainingTime % (1000 * 60)) / 1000);

          const remainingTimeText = `${remainingHours} hours, ${remainingMinutes} minutes, and ${remainingSeconds} seconds`;
          alert(`You can submit another application in ${remainingTimeText}.`);
          return;
        }
      }

      const senderDiscord = document.getElementById('discord').value;
      const senderSteam = document.getElementById('steam').value;
      // Collect other form values

      const webhookBody = {
        embeds: [{
          title: 'Application Submitted',
          fields: [
            // Include form values in the Discord webhook message
          ]
        }]
      };

      const webhookUrl = 'https://discord.com/api/webhooks/1114012981102129244/qlU4a6_bAhNuZJdYXRsSR0eREIrLwS1ZpH_T7IGi-XQ7Blove8P9lmc2XE9J27Z-aDWS';

      try {
        const response = await fetch(webhookUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(webhookBody),
        });

        if (response.ok) {
          const currentTime = new Date().getTime();
          localStorage.setItem('submissionTime', currentTime);
          ev.target.reset();
          alert('Application submitted successfully!');
        } else {
          alert('Failed to submit the application. Please try again later.');
        }
      } catch (error) {
        alert('An error occurred while submitting the application. Please try again later.');
      }
    }
  </script>
</body>
</html>
